{% extends 'base.html' %}

{% block content %}
<div class="container">
    <section class="section">
        <h1>Foro</h1>
        <p>Bienvenida al foro. Aquí puedes ver los hilos y crear uno nuevo.</p>
        {% if user.is_authenticated %}
            <a href="{% url 'foro_create_thread' %}" class="btn-resource">Crear Hilo</a>
        {% else %}
            <p>Inicia sesión para crear hilos y responder.</p>
        {% endif %}
    </section>

    <section class="section">
        <div class="cards-grid">
            {% for thread in threads %}
            <a href="{% url 'foro_thread_detail' thread.id %}" class="card-link">
                <div class="card">
                    <h3>{{ thread.title }}</h3>
                    {% if thread.author %}
                        <p>Iniciado por {{ thread.author.username }} - {{ thread.created_at|date:"SHORT_DATETIME_FORMAT" }}</p>
                    {% else %}
                        <p>Iniciado por Anónimo - {{ thread.created_at|date:"SHORT_DATETIME_FORMAT" }}</p>
                    {% endif %}
                    <p>{{ thread.posts.count }} respuestas</p>
                </div>
            </a>
            {% empty %}
            <div class="card">
                <p>No hay hilos todavía. Sé la primera en crear uno.</p>
            </div>
            {% endfor %}
        </div>
    </section>
</div>
{% endblock %}
